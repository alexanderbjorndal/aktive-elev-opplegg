{% extends "base.html" %}{% block title %}{{ opplegg.name }}{% endblock %} {%
block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='legg_inn_nytt_opplegg.css') }}" />

<div id="opplegg_body">
  <div id="centerer">
    <h1 align="center">{{ opplegg.name }}</h1>
    <form method="POST">
        {% if user.role == 'admin' %}
      <input
        type="text"
        name="opplegg"
        value ={{ opplegg.name }}
        size="40"
        id="opplegg"
        style="
          font-size: 18px;
          background: #eaeef1;
          border-radius: 10px;
          margin-bottom: 0.5rem;
        "
      /><br />{% endif %}
    <textarea
        placeholder="Forklar opplegget"
        id="datas"
        name="data"
        rows="4"
        cols="139"
        style="font-size: 14px"
        wrap="soft"
        required
        {% if user.role != 'admin' %} disabled {% endif %}
    >{{ opplegg.data }}</textarea>

    <div class="form-footer">
        <p>Alle egenskapene opplegget <b>kan</b> ha</p>
    </div>

    <!-- Dynamic Fieldsets for Traits -->
    <ul class="ks-cboxtags">
        {% for klasse, traits in klasse_groups.items() %}
            <fieldset>
                <legend>{{ klasse }}</legend>
                <div class="container">
                    <ul class="ks-cboxtags">
                    {% for trait in traits %}
                    
                        <li data-tooltip="{{ trait.forklaring }}">
                            <input
                                type="checkbox"
                                name="tags"
                                id="checkbox{{ trait.id }}"
                                value="{{ trait.name }}"
                                {% if trait in opplegg.traits %} checked {% endif %}
                                {% if user.role != 'admin' %} disabled {% endif %}
                            />
                            <label for="checkbox{{ trait.id }}">{{ trait.name }}</label>
                        </li>
                    {% endfor %}
                </ul>
                </div>
            </fieldset>
        {% endfor %}
    </ul>
{% if user.role == 'admin' %}<div align="center">
        <button type="submit" onsubmit="disableSubmitButton()" class="btn btn-primary" style="margin-top: 2rem">
          Large opplegget
        </button>
      </div>
    </form>
    <script>
      function disableSubmitButton() {
          document.getElementById('submit-button').disabled = true;
      }
</script>
  </div>
</div>{% endif %}
{% endblock %}